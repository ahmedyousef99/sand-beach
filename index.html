<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ø³Ø§Ù†Ø¯ Ø¨ÙŠØªØ´</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap");

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Cairo", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        direction: rtl;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      /* Header */
      .admin-header {
        background: linear-gradient(135deg, #ffd700 0%, #ffb300 100%);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        margin-bottom: 30px;
        text-align: center;
      }

      .admin-header h1 {
        color: #001f3f;
        font-size: 2.5em;
        margin-bottom: 10px;
        font-weight: 900;
      }

      .admin-header p {
        color: #0077be;
        font-size: 1.2em;
      }

      /* Tabs */
      .admin-tabs {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 15px;
      }

      .admin-tab {
        background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
        color: #001f3f;
        border: none;
        padding: 15px 30px;
        border-radius: 12px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        flex: 1;
        min-width: 150px;
      }

      .admin-tab:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      .admin-tab.active {
        background: linear-gradient(135deg, #ffd700 0%, #ffb300 100%);
        box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
      }

      /* Content Sections */
      .admin-section {
        display: none;
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .admin-section.active {
        display: block;
        animation: fadeIn 0.5s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Form Styles */
      .form-group {
        margin-bottom: 25px;
      }

      .form-group label {
        display: block;
        color: #001f3f;
        font-weight: bold;
        margin-bottom: 8px;
        font-size: 1.1em;
      }

      .form-group input,
      .form-group textarea,
      .form-group select {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 1em;
        font-family: "Cairo", sans-serif;
        transition: all 0.3s;
      }

      .form-group input:focus,
      .form-group textarea:focus,
      .form-group select:focus {
        outline: none;
        border-color: #0077be;
        box-shadow: 0 0 10px rgba(0, 119, 190, 0.2);
      }

      .form-group textarea {
        min-height: 100px;
        resize: vertical;
      }

      /* Buttons */
      .btn {
        padding: 15px 35px;
        border: none;
        border-radius: 12px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        font-family: "Cairo", sans-serif;
      }

      .btn-primary {
        background: linear-gradient(135deg, #0077be 0%, #00a8e8 100%);
        color: white;
      }

      .btn-success {
        background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
        color: white;
      }

      .btn-danger {
        background: linear-gradient(135deg, #ff6b6b 0%, #fa5252 100%);
        color: white;
      }

      .btn-warning {
        background: linear-gradient(135deg, #ffd700 0%, #ffb300 100%);
        color: #001f3f;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }

      .btn-group {
        display: flex;
        gap: 15px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      /* Items List */
      .items-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .item-card {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
        position: relative;
      }

      .item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .item-card-image {
        width: 100%;
        height: 150px;
        background: linear-gradient(135deg, #00d4ff 0%, #0077be 100%);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3em;
        margin-bottom: 15px;
        overflow: hidden;
      }

      .item-card-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .item-card h3 {
        color: #001f3f;
        margin-bottom: 10px;
        font-size: 1.3em;
      }

      .item-card p {
        color: #666;
        margin-bottom: 10px;
        line-height: 1.6;
      }

      .item-card .price {
        font-size: 1.5em;
        color: #0077be;
        font-weight: bold;
        margin: 15px 0;
      }

      .item-card .category-badge {
        display: inline-block;
        background: #ffd700;
        color: #001f3f;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.85em;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .item-card-actions {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }

      .item-card-actions button {
        flex: 1;
        padding: 10px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
      }

      .btn-edit {
        background: #0077be;
        color: white;
      }

      .btn-delete {
        background: #ff6b6b;
        color: white;
      }

      .btn-edit:hover,
      .btn-delete:hover {
        transform: scale(1.05);
      }

      /* Image Upload */
      .image-upload {
        border: 3px dashed #0077be;
        border-radius: 15px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        background: #f8f9fa;
      }

      .image-upload:hover {
        background: #e9ecef;
        border-color: #ffd700;
      }

      .image-upload input[type="file"] {
        display: none;
      }

      .image-preview {
        max-width: 300px;
        max-height: 300px;
        margin: 20px auto;
        border-radius: 10px;
        overflow: hidden;
      }

      .image-preview img {
        width: 100%;
        height: auto;
      }

      /* Restaurant Info Section */
      .info-card {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        border-left: 5px solid #0077be;
      }

      .info-card h3 {
        color: #001f3f;
        margin-bottom: 15px;
        font-size: 1.4em;
      }

      /* Statistics */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      }

      .stat-card .stat-number {
        font-size: 2.5em;
        font-weight: 900;
        color: #0077be;
        margin-bottom: 10px;
      }

      .stat-card .stat-label {
        color: #666;
        font-size: 1.1em;
      }

      /* Alert Messages */
      .alert {
        padding: 15px 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        display: none;
        animation: slideDown 0.5s;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .alert.show {
        display: block;
      }

      .alert-success {
        background: #d3f9d8;
        color: #2b8a3e;
        border-left: 5px solid #51cf66;
      }

      .alert-error {
        background: #ffe3e3;
        color: #c92a2a;
        border-left: 5px solid #ff6b6b;
      }

      .alert-info {
        background: #d0ebff;
        color: #1971c2;
        border-left: 5px solid #0077be;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        animation: fadeIn 0.3s;
      }

      .modal.show {
        display: flex;
      }

      .modal-content {
        background: white;
        padding: 30px;
        border-radius: 20px;
        max-width: 600px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        animation: slideUp 0.3s;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #e0e0e0;
      }

      .modal-header h2 {
        color: #001f3f;
        font-size: 1.8em;
      }

      .modal-close {
        background: #ff6b6b;
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        font-size: 1.5em;
        cursor: pointer;
        transition: all 0.3s;
      }

      .modal-close:hover {
        background: #fa5252;
        transform: rotate(90deg);
      }

      /* Emoji Picker */
      .emoji-picker {
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 10px;
        max-height: 200px;
        overflow-y: auto;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
        margin-bottom: 15px;
      }

      .emoji-picker span {
        font-size: 2em;
        cursor: pointer;
        text-align: center;
        padding: 10px;
        border-radius: 8px;
        transition: all 0.2s;
      }

      .emoji-picker span:hover {
        background: white;
        transform: scale(1.2);
      }

      /* Actions Bar */
      .actions-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
        gap: 15px;
      }

      .search-box {
        flex: 1;
        min-width: 250px;
      }

      .search-box input {
        width: 100%;
        padding: 12px 20px;
        border: 2px solid #e0e0e0;
        border-radius: 25px;
        font-size: 1em;
        font-family: "Cairo", sans-serif;
      }

      @media (max-width: 768px) {
        .admin-header h1 {
          font-size: 1.8em;
        }

        .admin-tabs {
          flex-direction: column;
        }

        .admin-tab {
          width: 100%;
        }

        .items-grid {
          grid-template-columns: 1fr;
        }

        .btn-group {
          flex-direction: column;
        }

        .btn-group .btn {
          width: 100%;
        }
      }
    </style>
    <!-- Supabase UMD (for direct browser use). Required for Supabase client to be available. -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="admin-header">
        <h1>ğŸ›ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ø³Ø§Ù† Ø¨ÙŠØªØ´</h1>
        <p>Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù…Ù†ÙŠÙˆ ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰</p>
      </div>

      <!-- Alert Messages -->
      <div id="alertContainer"></div>

      <!-- Navigation Tabs -->
      <div class="admin-tabs">
        <button
          class="admin-tab active"
          onclick="showAdminSection('dashboard')"
        >
          ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
        </button>
        <button class="admin-tab" onclick="showAdminSection('items')">
          ğŸ½ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù
        </button>
        <button class="admin-tab" onclick="showAdminSection('info')">
          â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…
        </button>
        <button class="admin-tab" onclick="showAdminSection('export')">
          ğŸ’¾ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ
        </button>
      </div>

      <!-- Dashboard Section -->
      <div id="dashboard" class="admin-section active">
        <h2 style="color: #001f3f; margin-bottom: 25px; font-size: 2em">
          ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©
        </h2>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" id="totalItemsCount">0</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙ†Ø§Ù</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="drinksCount">0</div>
            <div class="stat-label">Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="seafoodCount">0</div>
            <div class="stat-label">Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ©</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="grillCount">0</div>
            <div class="stat-label">Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="appetizersCount">0</div>
            <div class="stat-label">Ø§Ù„Ù…Ù‚Ø¨Ù„Ø§Øª</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="dessertCount">0</div>
            <div class="stat-label">Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª</div>
          </div>
        </div>

        <div class="info-card">
          <h3>ğŸš€ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
          <p style="line-height: 1.8; color: #666">
            â€¢ Ù„Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù" ÙˆØ§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù
            Ø¬Ø¯ÙŠØ¯"<br />
            â€¢ Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…"<br />
            â€¢ Ù„Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ "Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ"<br />
            â€¢ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ØªÙØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­<br />
            â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ ØµÙˆØ± Ù„Ù„Ø£ØµÙ†Ø§Ù (Ø­ØªÙ‰ 500KB Ù„Ù„ØµÙˆØ±Ø©)
          </p>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="showAdminSection('items')">
            ğŸ½ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù
          </button>
          <button class="btn btn-success" onclick="openAddItemModal()">
            â• Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯
          </button>
          <button class="btn btn-warning" onclick="showAdminSection('info')">
            â„¹ï¸ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…
          </button>
        </div>
      </div>

      <!-- Items Management Section -->
      <div id="items" class="admin-section">
        <div class="actions-bar">
          <h2 style="color: #001f3f; font-size: 2em">ğŸ½ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</h2>
          <button class="btn btn-success" onclick="openAddItemModal()">
            â• Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯
          </button>
        </div>

        <div class="actions-bar">
          <div class="search-box">
            <input
              type="text"
              id="searchItems"
              placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ØµÙ†Ù..."
              onkeyup="filterItems()"
            />
          </div>
          <select
            id="filterCategory"
            class="form-group"
            onchange="filterItems()"
            style="
              padding: 12px;
              border-radius: 10px;
              border: 2px solid #e0e0e0;
            "
          >
            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
            <option value="drinks">Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª</option>
            <option value="seafood">Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ©</option>
            <option value="grill">Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ</option>
            <option value="appetizers">Ø§Ù„Ù…Ù‚Ø¨Ù„Ø§Øª</option>
            <option value="dessert">Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª</option>
          </select>
        </div>

        <div id="itemsGrid" class="items-grid">
          <!-- Items will be loaded here -->
        </div>
      </div>

      <!-- Restaurant Info Section -->
      <div id="info" class="admin-section">
        <h2 style="color: #001f3f; margin-bottom: 25px; font-size: 2em">
          â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…
        </h2>

        <form id="restaurantInfoForm" onsubmit="saveRestaurantInfo(event)">
          <div class="form-group">
            <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ</label>
            <input
              type="text"
              id="restaurantNameAr"
              required
              value="Ø§Ù„Ø³Ø§Ù† Ø¨ÙŠØªØ´"
            />
          </div>

          <div class="form-group">
            <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</label>
            <input
              type="text"
              id="restaurantNameEn"
              required
              value="Al-Sun Beach Restaurant & CafÃ©"
            />
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø´Ø¹Ø§Ø±</label>
            <input
              type="text"
              id="restaurantTagline"
              required
              value="ğŸŒŠ Ù…Ø°Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø± ÙÙŠ ÙƒÙ„ Ù„Ù‚Ù…Ø© ğŸŒ…"
            />
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
            <input
              type="text"
              id="restaurantAddress"
              required
              value="Ø´Ø§Ø±Ø¹ Ø§Ù„Ø¨Ø­Ø±ØŒ Ù†Ø§Ø¨Ù„Ø³ØŒ ÙÙ„Ø³Ø·ÙŠÙ†"
            />
          </div>

          <div class="form-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø£ÙˆÙ„</label>
            <input
              type="tel"
              id="restaurantPhone1"
              required
              value="059-1234567"
            />
          </div>

          <div class="form-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø«Ø§Ù†ÙŠ</label>
            <input type="tel" id="restaurantPhone2" value="09-2345678" />
          </div>

          <div class="form-group">
            <label>Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„</label>
            <input
              type="text"
              id="restaurantHours"
              required
              value="10 ØµØ¨Ø§Ø­Ø§Ù‹ - 12 Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„"
            />
          </div>

          <div class="form-group">
            <label>Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„</label>
            <input
              type="text"
              id="restaurantDays"
              required
              value="Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³"
            />
          </div>

          <div class="btn-group">
            <button type="submit" class="btn btn-success">
              ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            </button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="resetRestaurantInfo()"
            >
              ğŸ”„ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            </button>
          </div>
        </form>
      </div>

      <!-- Export/Import Section -->
      <div id="export" class="admin-section">
        <h2 style="color: #001f3f; margin-bottom: 25px; font-size: 2em">
          ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
        </h2>

        <div class="info-card">
          <h3>ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
          <p style="color: #666; margin-bottom: 15px">
            Ø§Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…
          </p>
          <button class="btn btn-primary" onclick="exportData()">
            ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© (JSON)
          </button>
        </div>

        <div class="info-card">
          <h3>ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
          <p style="color: #666; margin-bottom: 15px">
            Ø§Ø³ØªØ±Ø¬Ø¹ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø³Ø§Ø¨Ù‚Ø©
          </p>
          <input
            type="file"
            id="importFile"
            accept=".json"
            style="margin-bottom: 15px"
          />
          <button class="btn btn-success" onclick="importData()">
            ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
          </button>
        </div>

        <div class="info-card">
          <h3>ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</h3>
          <p style="color: #666; margin-bottom: 15px">
            âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙŠØ¹ÙŠØ¯ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
          </p>
          <button class="btn btn-danger" onclick="resetAllData()">
            ğŸ—‘ï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
          </button>
        </div>
      </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div id="itemModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</h2>
          <button class="modal-close" onclick="closeItemModal()">Ã—</button>
        </div>

        <form id="itemForm" onsubmit="saveItem(event)">
          <input type="hidden" id="itemId" />
          <input type="hidden" id="itemCategory" />

          <div class="form-group">
            <label>Ø§Ù„ÙØ¦Ø©</label>
            <select
              id="categorySelect"
              required
              onchange="updateItemCategory()"
            >
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
              <option value="drinks">ğŸ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª</option>
              <option value="seafood">ğŸ¦ Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ©</option>
              <option value="grill">ğŸ– Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ</option>
              <option value="appetizers">ğŸ¥— Ø§Ù„Ù…Ù‚Ø¨Ù„Ø§Øª</option>
              <option value="dessert">ğŸ° Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label>
            <input
              type="text"
              id="itemName"
              required
              placeholder="Ù…Ø«Ø§Ù„: Ù…ÙˆÙ‡ÙŠØªÙˆ Ø§Ø³ØªÙˆØ§Ø¦ÙŠ"
            />
          </div>

          <div class="form-group">
            <label>Ø§Ù„ÙˆØµÙ</label>
            <textarea
              id="itemDescription"
              required
              placeholder="Ù…Ø«Ø§Ù„: Ù…Ø´Ø±ÙˆØ¨ Ù…Ù†Ø¹Ø´ Ø¨Ø§Ù„Ù†Ø¹Ù†Ø§Ø¹ Ø§Ù„Ø·Ø§Ø²Ø¬ ÙˆØ§Ù„Ù„ÙŠÙ…ÙˆÙ†..."
            ></textarea>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ø¹Ø± (Ø¨Ø§Ù„Ø´ÙŠÙƒÙ„)</label>
            <input
              type="number"
              id="itemPrice"
              required
              min="0"
              step="0.5"
              placeholder="Ù…Ø«Ø§Ù„: 22"
            />
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ</label>
            <div class="emoji-picker" id="emojiPicker">
              <span onclick="selectEmoji('ğŸ¹')">ğŸ¹</span>
              <span onclick="selectEmoji('ğŸ¥¥')">ğŸ¥¥</span>
              <span onclick="selectEmoji('ğŸŠ')">ğŸŠ</span>
              <span onclick="selectEmoji('ğŸ“')">ğŸ“</span>
              <span onclick="selectEmoji('â˜•')">â˜•</span>
              <span onclick="selectEmoji('ğŸ‹')">ğŸ‹</span>
              <span onclick="selectEmoji('ğŸ¥¤')">ğŸ¥¤</span>
              <span onclick="selectEmoji('ğŸµ')">ğŸµ</span>
              <span onclick="selectEmoji('ğŸ¦')">ğŸ¦</span>
              <span onclick="selectEmoji('ğŸŸ')">ğŸŸ</span>
              <span onclick="selectEmoji('ğŸ¦‘')">ğŸ¦‘</span>
              <span onclick="selectEmoji('ğŸ¦')">ğŸ¦</span>
              <span onclick="selectEmoji('ğŸ ')">ğŸ </span>
              <span onclick="selectEmoji('ğŸ¤')">ğŸ¤</span>
              <span onclick="selectEmoji('ğŸ¥©')">ğŸ¥©</span>
              <span onclick="selectEmoji('ğŸ—')">ğŸ—</span>
              <span onclick="selectEmoji('ğŸ–')">ğŸ–</span>
              <span onclick="selectEmoji('ğŸŒ­')">ğŸŒ­</span>
              <span onclick="selectEmoji('ğŸ¢')">ğŸ¢</span>
              <span onclick="selectEmoji('ğŸ¥™')">ğŸ¥™</span>
              <span onclick="selectEmoji('ğŸ¥—')">ğŸ¥—</span>
              <span onclick="selectEmoji('ğŸŸ')">ğŸŸ</span>
              <span onclick="selectEmoji('ğŸ§€')">ğŸ§€</span>
              <span onclick="selectEmoji('ğŸ¥–')">ğŸ¥–</span>
              <span onclick="selectEmoji('ğŸ°')">ğŸ°</span>
              <span onclick="selectEmoji('ğŸ«')">ğŸ«</span>
              <span onclick="selectEmoji('ğŸ¦')">ğŸ¦</span>
              <span onclick="selectEmoji('ğŸ¥¥')">ğŸ¥¥</span>
              <span onclick="selectEmoji('ğŸ®')">ğŸ®</span>
              <span onclick="selectEmoji('ğŸ¨')">ğŸ¨</span>
              <span onclick="selectEmoji('ğŸ¥§')">ğŸ¥§</span>
              <span onclick="selectEmoji('ğŸ‚')">ğŸ‚</span>
            </div>
            <input
              type="text"
              id="itemEmoji"
              required
              readonly
              placeholder="Ø§Ø®ØªØ± Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰"
              style="text-align: center; font-size: 2em"
            />
          </div>

          <div class="form-group">
            <label>Ø´Ø§Ø±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <select id="itemBadge">
              <option value="">Ø¨Ø¯ÙˆÙ† Ø´Ø§Ø±Ø©</option>
              <option value="popular">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</option>
              <option value="new">Ø¬Ø¯ÙŠØ¯</option>
              <option value="special">Ù…Ù…ÙŠØ²</option>
            </select>
          </div>

          <div class="form-group">
            <label>ØµÙˆØ±Ø© Ø§Ù„ØµÙ†Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <div
              class="image-upload"
              onclick="document.getElementById('itemImageInput').click()"
            >
              <input
                type="file"
                id="itemImageInput"
                accept="image/*"
                onchange="previewImage(event)"
              />
              <p>ğŸ“¸ Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø©</p>
              <p style="font-size: 0.9em; color: #666">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 500KB</p>
            </div>
            <div class="image-preview" id="imagePreview"></div>
            <input type="hidden" id="itemImage" />
          </div>

          <div class="btn-group">
            <button type="submit" class="btn btn-success">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù</button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="closeItemModal()"
            >
              âŒ Ø¥Ù„ØºØ§Ø¡
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // --- Supabase client (placeholder) ---
      // Project: https://unissiisuiezcwrlieio.supabase.co
      const SUPABASE_URL = "https://unissiisuiezcwrlieio.supabase.co";
      const SUPABASE_ANON_KEY =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVuaXNzaWlzdWllemN3cmxpZWlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzUwNjAsImV4cCI6MjA3NzkxMTA2MH0.R5-cyxFkzSVv6Mbs7UUl0D5luohgkbubdyMGnB5EyRc";
      // The supabase UMD script must be included in the page for the global `supabase` to exist.
      // We'll create a client instance and keep it in `supabaseClient`.
      let supabaseClient = null;
      try {
        if (
          window.supabase &&
          typeof window.supabase.createClient === "function"
        ) {
          supabaseClient = window.supabase.createClient(
            SUPABASE_URL,
            SUPABASE_ANON_KEY
          );
        }
      } catch (e) {
        console.warn("Supabase init failed or supabase script not loaded", e);
      }

      // Start realtime listener and initial cloud fetch (if supabase is available)
      async function startSupabaseSync(onUpdate) {
        if (!supabaseClient) return null;

        // NOTE: your schema uses numeric restaurant_id; we assume restaurant_id = 1
        const RESTAURANT_ID = 1;

        // Fetch initial data from `menu_items1` table for this restaurant
        try {
          const { data, error } = await supabaseClient
            .from("menu_items1")
            .select("*")
            .eq("restaurant_id", RESTAURANT_ID)
            .order("position", { ascending: true });

          if (!error && data) {
            menuItems = data.map((row) => ({
              id: row.id,
              category: row.category,
              name: row.name,
              description: row.description,
              price: Number(row.price),
              emoji: row.emoji,
              badge: row.badge,
              image: row.image,
              position: row.position !== null ? Number(row.position) : null,
            }));
            if (typeof onUpdate === "function") onUpdate();
          }
        } catch (err) {
          console.warn("Supabase fetch failed", err);
        }

        // Realtime subscription to menu_items1 for this restaurant
        try {
          const channel = supabaseClient
            .channel("public:menu_items1")
            .on(
              "postgres_changes",
              {
                event: "*",
                schema: "public",
                table: "menu_items1",
                filter: `restaurant_id=eq.${RESTAURANT_ID}`,
              },
              (payload) => {
                // payload may contain new/old rows
                try {
                  if (!payload.new && payload.old) {
                    // deletion
                    menuItems = menuItems.filter(
                      (i) => String(i.id) !== String(payload.old.id)
                    );
                  } else {
                    const row = payload.new || payload.record || payload;
                    if (row) {
                      const item = {
                        id: row.id,
                        category: row.category,
                        name: row.name,
                        description: row.description,
                        price: Number(row.price),
                        emoji: row.emoji,
                        badge: row.badge,
                        image: row.image,
                        position:
                          row.position !== null ? Number(row.position) : null,
                      };
                      const idx = menuItems.findIndex(
                        (i) => String(i.id) === String(item.id)
                      );
                      if (idx >= 0) menuItems[idx] = item;
                      else menuItems.push(item);
                    }
                  }
                  if (typeof onUpdate === "function") onUpdate();
                } catch (e) {
                  console.warn("Error handling realtime payload", e, payload);
                }
              }
            )
            .subscribe();

          return channel;
        } catch (err) {
          console.warn("Supabase realtime subscription failed", err);
          return null;
        }
      }

      // Save data to Supabase (synchronize menu_items1 table)
      async function saveDataToSupabase() {
        if (!supabaseClient) return;
        try {
          const RESTAURANT_ID = 1;
          // Delete existing rows for this restaurant and re-insert current items
          const del = await supabaseClient
            .from("menu_items1")
            .delete()
            .eq("restaurant_id", RESTAURANT_ID);
          if (del.error) console.warn("Supabase delete error", del.error);

          if (menuItems && menuItems.length > 0) {
            const rows = menuItems.map((item, idx) => ({
              id: String(item.id),
              restaurant_id: RESTAURANT_ID,
              category: item.category || null,
              name: item.name || null,
              description: item.description || null,
              price: item.price || 0,
              emoji: item.emoji || null,
              badge: item.badge || null,
              image: item.image || null,
              position: Number.isFinite(item.position) ? item.position : idx,
              updated_at: new Date().toISOString(),
            }));

            const ins = await supabaseClient.from("menu_items1").insert(rows);
            if (ins.error) console.warn("Supabase insert error", ins.error);
          }
        } catch (err) {
          console.warn("Supabase save failed", err);
        }
      }

      // Initialize data
      let menuItems = [];
      let restaurantInfo = {};
      let currentEditId = null;

      // Load data on page load
      window.onload = function () {
        loadData();
        updateDashboard();
        displayItems();
        // Try to start Supabase sync (will update UI when cloud data arrives)
        if (typeof startSupabaseSync === "function") {
          startSupabaseSync(() => {
            // When cloud data updates, refresh UI
            displayItems();
            updateDashboard();
            loadRestaurantInfo();
          }).catch((err) => console.warn("Supabase sync error", err));
        }
      };

      // Show admin section
      function showAdminSection(section) {
        document
          .querySelectorAll(".admin-section")
          .forEach((s) => s.classList.remove("active"));
        document
          .querySelectorAll(".admin-tab")
          .forEach((t) => t.classList.remove("active"));

        document.getElementById(section).classList.add("active");
        event.target.classList.add("active");

        if (section === "items") {
          displayItems();
        } else if (section === "dashboard") {
          updateDashboard();
        } else if (section === "info") {
          loadRestaurantInfo();
        }
      }

      // Load data from localStorage
      function loadData() {
        const savedItems = localStorage.getItem("alsunbeach_menu_items");
        const savedInfo = localStorage.getItem("alsunbeach_restaurant_info");

        if (savedItems) {
          menuItems = JSON.parse(savedItems);
        } else {
          // Initialize with default items
          initializeDefaultItems();
        }

        if (savedInfo) {
          restaurantInfo = JSON.parse(savedInfo);
        } else {
          initializeDefaultInfo();
        }
      }

      // Save data to localStorage
      function saveData() {
        localStorage.setItem(
          "alsunbeach_menu_items",
          JSON.stringify(menuItems)
        );
        localStorage.setItem(
          "alsunbeach_restaurant_info",
          JSON.stringify(restaurantInfo)
        );
        // Try to persist to Supabase as well (non-blocking). Keeps localStorage as a safe fallback.
        if (typeof saveDataToSupabase === "function") {
          saveDataToSupabase().catch((err) =>
            console.warn("Cloud save error", err)
          );
        }
      }

      // Initialize default items
      function initializeDefaultItems() {
        menuItems = [
          {
            id: Date.now() + 1,
            category: "drinks",
            name: "ğŸŒ´ Ù…ÙˆÙ‡ÙŠØªÙˆ Ø§Ø³ØªÙˆØ§Ø¦ÙŠ",
            description:
              "Ù…Ø´Ø±ÙˆØ¨ Ù…Ù†Ø¹Ø´ Ø¨Ø§Ù„Ù†Ø¹Ù†Ø§Ø¹ Ø§Ù„Ø·Ø§Ø²Ø¬ ÙˆØ§Ù„Ù„ÙŠÙ…ÙˆÙ† Ù…Ø¹ Ù†ÙƒÙ‡Ø© Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©",
            price: 22,
            emoji: "ğŸ¹",
            badge: "popular",
            image: "",
          },
          {
            id: Date.now() + 2,
            category: "seafood",
            name: "ğŸŒŠ ØµÙŠÙ†ÙŠØ© Ø¬Ù…Ø¨Ø±ÙŠ Ù…Ø´ÙˆÙŠ",
            description: "Ø¬Ù…Ø¨Ø±ÙŠ Ø·Ø§Ø²Ø¬ Ù…Ø´ÙˆÙŠ Ù…Ø¹ ØµÙ„ØµØ© Ø§Ù„Ø«ÙˆÙ… ÙˆØ§Ù„Ù„ÙŠÙ…ÙˆÙ†",
            price: 85,
            emoji: "ğŸ¦",
            badge: "popular",
            image: "",
          },
        ];
        saveData();
      }

      // Initialize default restaurant info
      function initializeDefaultInfo() {
        restaurantInfo = {
          nameAr: "Ø§Ù„Ø³Ø§Ù† Ø¨ÙŠØªØ´",
          nameEn: "Al-Sun Beach Restaurant & CafÃ©",
          tagline: "ğŸŒŠ Ù…Ø°Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø± ÙÙŠ ÙƒÙ„ Ù„Ù‚Ù…Ø© ğŸŒ…",
          address: "Ø´Ø§Ø±Ø¹ Ø§Ù„Ø¨Ø­Ø±ØŒ Ù†Ø§Ø¨Ù„Ø³ØŒ ÙÙ„Ø³Ø·ÙŠÙ†",
          phone1: "059-1234567",
          phone2: "09-2345678",
          hours: "10 ØµØ¨Ø§Ø­Ø§Ù‹ - 12 Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„",
          days: "Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³",
        };
        saveData();
      }

      // Update dashboard statistics
      function updateDashboard() {
        const counts = {
          total: menuItems.length,
          drinks: menuItems.filter((i) => i.category === "drinks").length,
          seafood: menuItems.filter((i) => i.category === "seafood").length,
          grill: menuItems.filter((i) => i.category === "grill").length,
          appetizers: menuItems.filter((i) => i.category === "appetizers")
            .length,
          dessert: menuItems.filter((i) => i.category === "dessert").length,
        };

        document.getElementById("totalItemsCount").textContent = counts.total;
        document.getElementById("drinksCount").textContent = counts.drinks;
        document.getElementById("seafoodCount").textContent = counts.seafood;
        document.getElementById("grillCount").textContent = counts.grill;
        document.getElementById("appetizersCount").textContent =
          counts.appetizers;
        document.getElementById("dessertCount").textContent = counts.dessert;
      }

      // Display items in grid
      function displayItems() {
        const grid = document.getElementById("itemsGrid");
        const searchTerm =
          document.getElementById("searchItems")?.value.toLowerCase() || "";
        const filterCat =
          document.getElementById("filterCategory")?.value || "all";

        let filteredItems = menuItems;

        if (searchTerm) {
          filteredItems = filteredItems.filter(
            (item) =>
              item.name.toLowerCase().includes(searchTerm) ||
              item.description.toLowerCase().includes(searchTerm)
          );
        }

        if (filterCat !== "all") {
          filteredItems = filteredItems.filter(
            (item) => item.category === filterCat
          );
        }

        grid.innerHTML = "";

        if (filteredItems.length === 0) {
          grid.innerHTML =
            '<p style="text-align: center; color: #666; font-size: 1.2em; grid-column: 1/-1;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù</p>';
          return;
        }

        filteredItems.forEach((item) => {
          const categoryNames = {
            drinks: "Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª",
            seafood: "Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ©",
            grill: "Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ",
            appetizers: "Ø§Ù„Ù…Ù‚Ø¨Ù„Ø§Øª",
            dessert: "Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª",
          };

          const badgeHTML = item.badge
            ? `<span class="category-badge">${
                item.badge === "popular"
                  ? "Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹"
                  : item.badge === "new"
                  ? "Ø¬Ø¯ÙŠØ¯"
                  : item.badge === "special"
                  ? "Ù…Ù…ÙŠØ²"
                  : ""
              }</span>`
            : "";

          const imageHTML = item.image
            ? `<img src="${item.image}" alt="${item.name}">`
            : item.emoji;

          grid.innerHTML += `
                    <div class="item-card">
                        <span class="category-badge" style="background: #0077be; color: white;">${
                          categoryNames[item.category]
                        }</span>
                        ${badgeHTML}
                        <div class="item-card-image">${imageHTML}</div>
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="price">${item.price} â‚ª</div>
                        <div class="item-card-actions">
                            <button class="btn-edit" onclick="editItem('${
                              item.id
                            }')">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn-delete" onclick="deleteItem('${
                              item.id
                            }')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                        </div>
                    </div>
                `;
        });
      }

      // Filter items
      function filterItems() {
        displayItems();
      }

      // Open add item modal
      function openAddItemModal() {
        currentEditId = null;
        document.getElementById("modalTitle").textContent = "Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯";
        document.getElementById("itemForm").reset();
        document.getElementById("itemId").value = "";
        document.getElementById("imagePreview").innerHTML = "";
        document.getElementById("itemModal").classList.add("show");
      }

      // Close item modal
      function closeItemModal() {
        document.getElementById("itemModal").classList.remove("show");
      }

      // Update item category
      function updateItemCategory() {
        const category = document.getElementById("categorySelect").value;
        document.getElementById("itemCategory").value = category;
      }

      // Select emoji
      function selectEmoji(emoji) {
        document.getElementById("itemEmoji").value = emoji;
      }

      // Preview image
      function previewImage(event) {
        const file = event.target.files[0];
        if (file) {
          if (file.size > 500000) {
            showAlert("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹! Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 500KB", "error");
            event.target.value = "";
            return;
          }

          const reader = new FileReader();
          reader.onload = function (e) {
            document.getElementById(
              "imagePreview"
            ).innerHTML = `<img src="${e.target.result}" alt="Preview">`;
            document.getElementById("itemImage").value = e.target.result;
          };
          reader.readAsDataURL(file);
        }
      }

      // Save item
      function saveItem(event) {
        event.preventDefault();

        const itemData = {
          id: String(currentEditId || Date.now()),
          category: document.getElementById("categorySelect").value,
          name: document.getElementById("itemName").value,
          description: document.getElementById("itemDescription").value,
          price: parseFloat(document.getElementById("itemPrice").value),
          emoji: document.getElementById("itemEmoji").value,
          badge: document.getElementById("itemBadge").value,
          image: document.getElementById("itemImage").value,
        };

        if (currentEditId) {
          // Edit existing item
          const index = menuItems.findIndex(
            (i) => String(i.id) === String(currentEditId)
          );
          if (index !== -1) {
            menuItems[index] = itemData;
            showAlert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­! âœ…", "success");
          }
        } else {
          // Add new item
          menuItems.push(itemData);
          showAlert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­! âœ…", "success");
        }

        saveData();
        displayItems();
        updateDashboard();
        closeItemModal();
      }

      // Edit item
      function editItem(id) {
        currentEditId = id;
        const item = menuItems.find((i) => String(i.id) === String(id));

        if (item) {
          document.getElementById("modalTitle").textContent = "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙ†Ù";
          document.getElementById("itemId").value = item.id;
          document.getElementById("categorySelect").value = item.category;
          document.getElementById("itemName").value = item.name;
          document.getElementById("itemDescription").value = item.description;
          document.getElementById("itemPrice").value = item.price;
          document.getElementById("itemEmoji").value = item.emoji;
          document.getElementById("itemBadge").value = item.badge || "";
          document.getElementById("itemImage").value = item.image || "";

          if (item.image) {
            document.getElementById(
              "imagePreview"
            ).innerHTML = `<img src="${item.image}" alt="Preview">`;
          }

          document.getElementById("itemModal").classList.add("show");
        }
      }

      // Delete item
      function deleteItem(id) {
        if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ†ÙØŸ")) {
          menuItems = menuItems.filter((i) => String(i.id) !== String(id));
          saveData();
          displayItems();
          updateDashboard();
          showAlert("ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­! âœ…", "success");
        }
      }

      // Load restaurant info
      function loadRestaurantInfo() {
        document.getElementById("restaurantNameAr").value =
          restaurantInfo.nameAr || "";
        document.getElementById("restaurantNameEn").value =
          restaurantInfo.nameEn || "";
        document.getElementById("restaurantTagline").value =
          restaurantInfo.tagline || "";
        document.getElementById("restaurantAddress").value =
          restaurantInfo.address || "";
        document.getElementById("restaurantPhone1").value =
          restaurantInfo.phone1 || "";
        document.getElementById("restaurantPhone2").value =
          restaurantInfo.phone2 || "";
        document.getElementById("restaurantHours").value =
          restaurantInfo.hours || "";
        document.getElementById("restaurantDays").value =
          restaurantInfo.days || "";
      }

      // Save restaurant info
      function saveRestaurantInfo(event) {
        event.preventDefault();

        restaurantInfo = {
          nameAr: document.getElementById("restaurantNameAr").value,
          nameEn: document.getElementById("restaurantNameEn").value,
          tagline: document.getElementById("restaurantTagline").value,
          address: document.getElementById("restaurantAddress").value,
          phone1: document.getElementById("restaurantPhone1").value,
          phone2: document.getElementById("restaurantPhone2").value,
          hours: document.getElementById("restaurantHours").value,
          days: document.getElementById("restaurantDays").value,
        };

        saveData();
        showAlert("ØªÙ… Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­! âœ…", "success");
      }

      // Reset restaurant info
      function resetRestaurantInfo() {
        if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©ØŸ")) {
          initializeDefaultInfo();
          loadRestaurantInfo();
          showAlert("ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©! âœ…", "success");
        }
      }

      // Export data
      function exportData() {
        const data = {
          menuItems: menuItems,
          restaurantInfo: restaurantInfo,
          exportDate: new Date().toISOString(),
        };

        const dataStr = JSON.stringify(data, null, 2);
        const dataBlob = new Blob([dataStr], { type: "application/json" });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement("a");
        link.href = url;
        link.download = `alsunbeach-backup-${Date.now()}.json`;
        link.click();

        showAlert("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! âœ…", "success");
      }

      // Import data
      function importData() {
        const fileInput = document.getElementById("importFile");
        const file = fileInput.files[0];

        if (!file) {
          showAlert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ù„Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯!", "error");
          return;
        }

        const reader = new FileReader();
        reader.onload = function (e) {
          try {
            const data = JSON.parse(e.target.result);

            if (data.menuItems && data.restaurantInfo) {
              if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©!")) {
                menuItems = data.menuItems;
                restaurantInfo = data.restaurantInfo;
                saveData();
                displayItems();
                updateDashboard();
                showAlert("ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! âœ…", "success");
              }
            } else {
              showAlert("Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­!", "error");
            }
          } catch (error) {
            showAlert("Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù!", "error");
          }
        };
        reader.readAsText(file);
      }

      // Reset all data
      function resetAllData() {
        if (confirm("âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
          if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!")) {
            localStorage.removeItem("alsunbeach_menu_items");
            localStorage.removeItem("alsunbeach_restaurant_info");
            initializeDefaultItems();
            initializeDefaultInfo();
            displayItems();
            updateDashboard();
            loadRestaurantInfo();
            showAlert("ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! âœ…", "success");
          }
        }
      }

      // Show alert
      function showAlert(message, type) {
        const alertContainer = document.getElementById("alertContainer");
        const alertClass =
          type === "success"
            ? "alert-success"
            : type === "error"
            ? "alert-error"
            : "alert-info";

        const alertHTML = `
                <div class="alert ${alertClass} show">
                    ${message}
                </div>
            `;

        alertContainer.innerHTML = alertHTML;

        setTimeout(() => {
          alertContainer.innerHTML = "";
        }, 3000);
      }

      // Close modal on outside click
      window.onclick = function (event) {
        const modal = document.getElementById("itemModal");
        if (event.target === modal) {
          closeItemModal();
        }
      };
    </script>
  </body>
</html>
